<div class='clearfix'>
  <h1 class='float-left'>
    <%= @idea.title %>
  </h1>
  <p>
    <%= @idea.description %>
  </p>
</div>
<small>Liked by: <%= @idea.likes.count %> people</small>
<% if can?(:like,@idea)%>
  <small>
    <% if @like.present? %>
      <%= link_to "Unlike", like_path(@like), method: :delete %>
    <% else %>
      <%= link_to "Like", idea_likes_path(@idea), method: :post %> 
    <% end %>
  </small>
<% end %>
<h4>Created by: <%= @idea.user&.full_name || 'DELETED'%></h4>
<small>Created: <%= time_ago_in_words @idea.created_at %> ago</small>
<small>Last Updated: <%= time_ago_in_words @idea.updated_at %> ago</small>


<% if can?(:crud, @idea) %>
  <%= link_to "Edit", edit_idea_path(@idea) %>
  <%= link_to "Delete", idea_path(@idea), method: :delete, data: { confirm: "Are you sure?" } %>
<% end %>

<%= render 'reviews/form'%>
<hr>
<% @reviews.each do |review|%>
  <%= review.body %>
  <br>
  <small>Reviewed by:<strong> <%= review.user&.full_name || 'DELETED' %></strong></small><br>
  <small>Created: <%= time_ago_in_words(review.created_at)%> ago</small><br>

  <% if can? :crud, review %>
    <%= link_to("Delete", idea_review_path(@idea,review), method: :delete, data:{confirm: 'Are you sure?'})%>
  <% end %>
  <hr>
<% end %>